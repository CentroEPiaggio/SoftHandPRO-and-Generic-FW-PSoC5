\doxysection{command\+\_\+processing.\+h File Reference}
\label{command__processing_8h}\index{command\_processing.h@{command\_processing.h}}


Received commands processing functions ~\newline
  


{\ttfamily \#include \char`\"{}globals.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}IMU\+\_\+functions.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Encoder\+\_\+functions.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}SD\+\_\+\+RTC\+\_\+functions.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}interruptions.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}utils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}commands.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
Include dependency graph for command\+\_\+processing.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsection*{Functions}
\begin{Indent}\textbf{ Firmware information functions}\par
\begin{DoxyCompactItemize}
\item 
void \textbf{ prepare\+\_\+generic\+\_\+info} (char $\ast$info\+\_\+string)
\item 
void \textbf{ prepare\+\_\+counter\+\_\+info} (char $\ast$info\+\_\+string)
\item 
void \textbf{ prepare\+\_\+\+R01\+\_\+info} (char $\ast$info\+\_\+string)
\item 
void \textbf{ prepare\+\_\+\+SD\+\_\+info} (char $\ast$info\+\_\+string)
\item 
void \textbf{ prepare\+\_\+\+SD\+\_\+param\+\_\+info} (char $\ast$info\+\_\+string)
\item 
void \textbf{ prepare\+\_\+\+SD\+\_\+\+EMG\+\_\+history} (char $\ast$info\+\_\+string)
\item 
void \textbf{ prepare\+\_\+\+SD\+\_\+legend} (char $\ast$info\+\_\+string)
\item 
void \textbf{ prepare\+\_\+\+SD\+\_\+\+EMG\+\_\+\+History\+\_\+legend} (char $\ast$info\+\_\+string)
\item 
void \textbf{ IMU\+\_\+reading\+\_\+info} (char $\ast$info\+\_\+string)
\item 
void \textbf{ info\+Send} ()
\item 
void \textbf{ info\+Get} (uint16 info\+\_\+type)
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Command receiving and sending functions}\par
\begin{DoxyCompactItemize}
\item 
void \textbf{ comm\+Process} ()
\item 
void \textbf{ comm\+Write\+\_\+old\+\_\+id} (uint8 $\ast$packet\+\_\+data, uint16 packet\+\_\+lenght, uint8 old\+\_\+id)
\item 
void \textbf{ comm\+Write} (uint8 $\ast$packet\+\_\+data, uint16 packet\+\_\+lenght)
\item 
void \textbf{ comm\+Write\+ID} (uint8 $\ast$packet\+\_\+data, uint16 packet\+\_\+lenght, uint8 id)
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Memory management functions}\par
\begin{DoxyCompactItemize}
\item 
void \textbf{ manage\+\_\+param\+\_\+list} (uint16 index)
\item 
void \textbf{ get\+\_\+param\+\_\+list} (uint8 $\ast$VAR\+\_\+P[\textbf{ NUM\+\_\+\+OF\+\_\+\+PARAMS}], uint8 TYPES[\textbf{ NUM\+\_\+\+OF\+\_\+\+PARAMS}], uint8 NUM\+\_\+\+ITEMS[\textbf{ NUM\+\_\+\+OF\+\_\+\+PARAMS}], uint8 NUM\+\_\+\+STRUCT[\textbf{ NUM\+\_\+\+OF\+\_\+\+PARAMS}], uint8 $\ast$NUM\+\_\+\+MENU, const char $\ast$PARAMS\+\_\+\+STR[\textbf{ NUM\+\_\+\+OF\+\_\+\+PARAMS}], uint8 CUSTOM\+\_\+\+PARAM\+\_\+\+SET[\textbf{ NUM\+\_\+\+OF\+\_\+\+PARAMS}], const char $\ast$MENU\+\_\+\+STR[\textbf{ NUM\+\_\+\+OF\+\_\+\+PARAMS\+\_\+\+MENU}])
\item 
void \textbf{ set\+\_\+custom\+\_\+param} (uint16 index)
\item 
void \textbf{ get\+\_\+\+IMU\+\_\+param\+\_\+list} (uint16 index)
\item 
void \textbf{ set\+Zeros} ()
\item 
uint8 \textbf{ mem\+Store} (int displacement)
\item 
void \textbf{ mem\+Recall} ()
\item 
uint8 \textbf{ mem\+Restore} ()
\item 
uint8 \textbf{ mem\+Init} ()
\item 
void \textbf{ mem\+Init\+\_\+\+Soft\+Hand\+Pro} ()
\item 
void \textbf{ mem\+Init\+\_\+\+Master} ()
\item 
void \textbf{ mem\+Init\+\_\+\+Air\+Chambers\+Fb} ()
\item 
void \textbf{ mem\+Init\+\_\+\+Otbk\+Act\+Wrist\+Ms} ()
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Utility functions}\par
\begin{DoxyCompactItemize}
\item 
uint8 \textbf{ LCRChecksum} (uint8 $\ast$data\+\_\+array, uint8 data\+\_\+length)
\item 
void \textbf{ send\+Acknowledgment} (uint8 value)
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Command processing functions}\par
\begin{DoxyCompactItemize}
\item 
void \textbf{ cmd\+\_\+activate} ()
\item 
void \textbf{ cmd\+\_\+set\+\_\+inputs} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+measurements} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+curr\+\_\+and\+\_\+meas} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+velocities} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+accelerations} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+joystick} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+currents} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+currents\+\_\+for\+\_\+cuff} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+emg} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+activate} ()
\item 
void \textbf{ cmd\+\_\+set\+\_\+baudrate} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+inputs} ()
\item 
void \textbf{ cmd\+\_\+store\+\_\+params} ()
\item 
void \textbf{ cmd\+\_\+ping} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+imu\+\_\+readings} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+encoder\+\_\+map} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+encoder\+\_\+raw} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+\+ADC\+\_\+map} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+\+ADC\+\_\+raw} ()
\item 
void \textbf{ cmd\+\_\+get\+\_\+\+SD\+\_\+file} (uint16 filename\+\_\+length)
\item 
void \textbf{ cmd\+\_\+remove\+\_\+\+SD\+\_\+file} (uint16 filename\+\_\+length)
\item 
\mbox{\label{command__processing_8h_a308022a04c9da94099b233c05942f9d9}} 
void {\bfseries air\+\_\+chambers\+\_\+control} (int slave\+\_\+motor\+\_\+idx)
\item 
\mbox{\label{command__processing_8h_a79073b26a718383551f0b008082291d4}} 
uint8 {\bfseries emg\+\_\+activation\+\_\+velocity\+\_\+fsm} ()
\item 
\mbox{\label{command__processing_8h_a792fff039e9d237fee86bda6d41b8067}} 
void {\bfseries otbk\+\_\+act\+\_\+wrist\+\_\+control} (int slave\+\_\+motor\+\_\+idx)
\item 
int16 \textbf{ comm\+Read\+Res\+Curr\+From\+SH} ()
\item 
void \textbf{ drive\+\_\+slave} (uint8 motor\+\_\+idx, uint8 slave\+\_\+\+ID)
\item 
void \textbf{ stop\+\_\+master\+\_\+device} ()
\item 
void \textbf{ deactivate\+\_\+slaves} ()
\end{DoxyCompactItemize}
\end{Indent}


\doxysubsection{Detailed Description}
Received commands processing functions ~\newline
 

\begin{DoxyDate}{Date}
May 26th, 2022 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
{\itshape Centro \char`\"{}\+E.\+Piaggio\char`\"{}} 
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
(C) 2012-\/2016 qbrobotics. All rights reserved. 

(C) 2017-\/2022 Centro \char`\"{}\+E.\+Piaggio\char`\"{}. All rights reserved.
\end{DoxyCopyright}
This file contains all the definitions of the functions used to process the commands sent from the user interfaces (simulink, command line, GUI) 

\doxysubsection{Function Documentation}
\mbox{\label{command__processing_8h_a107fc9f2982f9a953bdd82aa07279499}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_activate@{cmd\_activate}}
\index{cmd\_activate@{cmd\_activate}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_activate()}
{\footnotesize\ttfamily void cmd\+\_\+activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function activates the board \mbox{\label{command__processing_8h_a0da9d76da2e4332137635f18e1d0004b}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_accelerations@{cmd\_get\_accelerations}}
\index{cmd\_get\_accelerations@{cmd\_get\_accelerations}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_accelerations()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+accelerations (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the encoders accelerations and puts them in the package to be sent. \mbox{\label{command__processing_8h_a554d563001517bfbc44400a1e999b393}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_activate@{cmd\_get\_activate}}
\index{cmd\_get\_activate@{cmd\_get\_activate}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_activate()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the board activation status and puts it in the package to be sent. \mbox{\label{command__processing_8h_aed52a69c50e11b3db2feaebe65bacdc9}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_ADC\_map@{cmd\_get\_ADC\_map}}
\index{cmd\_get\_ADC\_map@{cmd\_get\_ADC\_map}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_ADC\_map()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+\+ADC\+\_\+map (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets ADC map \mbox{\label{command__processing_8h_afc8c1d4f31f68fc267fdfb6f9ce27f9b}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_ADC\_raw@{cmd\_get\_ADC\_raw}}
\index{cmd\_get\_ADC\_raw@{cmd\_get\_ADC\_raw}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_ADC\_raw()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+\+ADC\+\_\+raw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets Additional emg raw values \mbox{\label{command__processing_8h_a45a90a8455bfdb6a7f0e118da2c6f0a6}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_curr\_and\_meas@{cmd\_get\_curr\_and\_meas}}
\index{cmd\_get\_curr\_and\_meas@{cmd\_get\_curr\_and\_meas}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_curr\_and\_meas()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+curr\+\_\+and\+\_\+meas (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the currents and encoders measurements and puts them in the package to be sent. \mbox{\label{command__processing_8h_aaf613e251c1e14fe4fffe3e9e033f9f7}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_currents@{cmd\_get\_currents}}
\index{cmd\_get\_currents@{cmd\_get\_currents}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_currents()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+currents (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the motor current and puts it in the package to be sent to the user. \mbox{\label{command__processing_8h_accac7b4a0a0e43618bbb983c73106229}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_currents\_for\_cuff@{cmd\_get\_currents\_for\_cuff}}
\index{cmd\_get\_currents\_for\_cuff@{cmd\_get\_currents\_for\_cuff}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_currents\_for\_cuff()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+currents\+\_\+for\+\_\+cuff (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the motor current and puts it in the package to be sent to the Cuff device, using the comm\+Write\+\_\+to\+\_\+cuff function. \mbox{\label{command__processing_8h_ae579c6ac56fef33632f9c9f2c42b90a0}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_emg@{cmd\_get\_emg}}
\index{cmd\_get\_emg@{cmd\_get\_emg}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_emg()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+emg (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the electromyographic sensors measurements and puts them in the package to be sent. \mbox{\label{command__processing_8h_a8abc9b37221e3003a9132a698d450851}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_encoder\_map@{cmd\_get\_encoder\_map}}
\index{cmd\_get\_encoder\_map@{cmd\_get\_encoder\_map}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_encoder\_map()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+encoder\+\_\+map (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets Encoder map \mbox{\label{command__processing_8h_aa84daad5d8efc2a01c63f6124c92fb5b}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_encoder\_raw@{cmd\_get\_encoder\_raw}}
\index{cmd\_get\_encoder\_raw@{cmd\_get\_encoder\_raw}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_encoder\_raw()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+encoder\+\_\+raw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets Encoder raw values \mbox{\label{command__processing_8h_a40f7c67690279132ab72019b76165cb8}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_imu\_readings@{cmd\_get\_imu\_readings}}
\index{cmd\_get\_imu\_readings@{cmd\_get\_imu\_readings}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_imu\_readings()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+imu\+\_\+readings (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets IMU readings \mbox{\label{command__processing_8h_a20db4694e8caa572ec479f73ce8b3b02}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_inputs@{cmd\_get\_inputs}}
\index{cmd\_get\_inputs@{cmd\_get\_inputs}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_inputs()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+inputs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the current motor reference inputs and puts them in the package to be sent. \mbox{\label{command__processing_8h_a09b189bd1592a8f95769a1907f44b555}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_joystick@{cmd\_get\_joystick}}
\index{cmd\_get\_joystick@{cmd\_get\_joystick}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_joystick()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+joystick (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the joystick analog values and puts them in the package to be sent. \mbox{\label{command__processing_8h_af5ccd403f1d3e49c97bafd6e7713cff3}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_measurements@{cmd\_get\_measurements}}
\index{cmd\_get\_measurements@{cmd\_get\_measurements}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_measurements()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+measurements (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the encoders measurements and puts them in the package to be sent.

Bunch of functions used on request from UART communication \mbox{\label{command__processing_8h_a90d37f64d1eac91112e56a3724e57e0a}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_SD\_file@{cmd\_get\_SD\_file}}
\index{cmd\_get\_SD\_file@{cmd\_get\_SD\_file}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_SD\_file()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+\+SD\+\_\+file (\begin{DoxyParamCaption}\item[{uint16}]{filename\+\_\+length }\end{DoxyParamCaption})}

This function gets a file on the SD \mbox{\label{command__processing_8h_a212883283bd7a8f32846615271cad8ce}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_get\_velocities@{cmd\_get\_velocities}}
\index{cmd\_get\_velocities@{cmd\_get\_velocities}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_get\_velocities()}
{\footnotesize\ttfamily void cmd\+\_\+get\+\_\+velocities (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the encoders velocities and puts them in the package to be sent. \mbox{\label{command__processing_8h_a704f8c8cb0f4d75f243fc2b79bc34188}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_ping@{cmd\_ping}}
\index{cmd\_ping@{cmd\_ping}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_ping()}
{\footnotesize\ttfamily void cmd\+\_\+ping (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function is used to ping the device and see if is connected. \mbox{\label{command__processing_8h_ae4ff78ea00367bc472df80011c0ebc86}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_remove\_SD\_file@{cmd\_remove\_SD\_file}}
\index{cmd\_remove\_SD\_file@{cmd\_remove\_SD\_file}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_remove\_SD\_file()}
{\footnotesize\ttfamily void cmd\+\_\+remove\+\_\+\+SD\+\_\+file (\begin{DoxyParamCaption}\item[{uint16}]{filename\+\_\+length }\end{DoxyParamCaption})}

This function removes a file on the SD \mbox{\label{command__processing_8h_aa86bf1f2fa69ab5927f7e4e40eb40581}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_set\_baudrate@{cmd\_set\_baudrate}}
\index{cmd\_set\_baudrate@{cmd\_set\_baudrate}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_set\_baudrate()}
{\footnotesize\ttfamily void cmd\+\_\+set\+\_\+baudrate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function sets the desired communication baudrate. It is possible to select a value equal to 460800 or 2000000. \mbox{\label{command__processing_8h_a2d8a4542f55af960a27f875b00aad6a1}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_set\_inputs@{cmd\_set\_inputs}}
\index{cmd\_set\_inputs@{cmd\_set\_inputs}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_set\_inputs()}
{\footnotesize\ttfamily void cmd\+\_\+set\+\_\+inputs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function gets the inputs from the received package and sets them as motor reference. \mbox{\label{command__processing_8h_a1a2493bfc2f30171d7e7a3bd5aebab14}} 
\index{command\_processing.h@{command\_processing.h}!cmd\_store\_params@{cmd\_store\_params}}
\index{cmd\_store\_params@{cmd\_store\_params}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{cmd\_store\_params()}
{\footnotesize\ttfamily void cmd\+\_\+store\+\_\+params (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function stores the parameters to the EEPROM memory \mbox{\label{command__processing_8h_a2e5d1711e19837adc3e8f479af3ae509}} 
\index{command\_processing.h@{command\_processing.h}!commProcess@{commProcess}}
\index{commProcess@{commProcess}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{commProcess()}
{\footnotesize\ttfamily void comm\+Process (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function unpacks the received package, depending on the command received. ~\newline
 \mbox{\label{command__processing_8h_af37abb7623deb4ea3af0da3801ab3788}} 
\index{command\_processing.h@{command\_processing.h}!commReadResCurrFromSH@{commReadResCurrFromSH}}
\index{commReadResCurrFromSH@{commReadResCurrFromSH}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{commReadResCurrFromSH()}
{\footnotesize\ttfamily int16 comm\+Read\+Res\+Curr\+From\+SH (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function reads on the serial port the residual current from SH. \mbox{\label{command__processing_8h_af92ab4f3c1e0c0e8f5966bf2e2edeaba}} 
\index{command\_processing.h@{command\_processing.h}!commWrite@{commWrite}}
\index{commWrite@{commWrite}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{commWrite()}
{\footnotesize\ttfamily void comm\+Write (\begin{DoxyParamCaption}\item[{uint8 $\ast$}]{packet\+\_\+data,  }\item[{uint16}]{packet\+\_\+lenght }\end{DoxyParamCaption})}

This function writes on the serial port the package that needs to be sent to the user.


\begin{DoxyParams}{Parameters}
{\em packet\+\_\+data} & The array of data that must be written. \\
\hline
{\em packet\+\_\+lenght} & The lenght of the data array. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_a517f4c61166381d40767fce9011e3c96}} 
\index{command\_processing.h@{command\_processing.h}!commWrite\_old\_id@{commWrite\_old\_id}}
\index{commWrite\_old\_id@{commWrite\_old\_id}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{commWrite\_old\_id()}
{\footnotesize\ttfamily void comm\+Write\+\_\+old\+\_\+id (\begin{DoxyParamCaption}\item[{uint8 $\ast$}]{packet\+\_\+data,  }\item[{uint16}]{packet\+\_\+lenght,  }\item[{uint8}]{old\+\_\+id }\end{DoxyParamCaption})}

This function writes on the serial port the package that needs to be sent to the user. Is used only when a new is set, to communicate back to the APIs that the new ID setting went fine or there was an error.


\begin{DoxyParams}{Parameters}
{\em packet\+\_\+data} & The array of data that must be written. \\
\hline
{\em packet\+\_\+lenght} & The lenght of the data array. \\
\hline
{\em old\+\_\+id} & The previous id of the board, before setting a new one. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_aed6a94cc62768fbec790b25a22eb3424}} 
\index{command\_processing.h@{command\_processing.h}!commWriteID@{commWriteID}}
\index{commWriteID@{commWriteID}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{commWriteID()}
{\footnotesize\ttfamily void comm\+Write\+ID (\begin{DoxyParamCaption}\item[{uint8 $\ast$}]{packet\+\_\+data,  }\item[{uint16}]{packet\+\_\+lenght,  }\item[{uint8}]{id }\end{DoxyParamCaption})}

This function writes on the serial port the package that needs to be sent to another board.


\begin{DoxyParams}{Parameters}
{\em packet\+\_\+data} & The array of data that must be written. \\
\hline
{\em packet\+\_\+lenght} & The lenght of the data array. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_a22eb92c869daf62079d72a328c54aec7}} 
\index{command\_processing.h@{command\_processing.h}!deactivate\_slaves@{deactivate\_slaves}}
\index{deactivate\_slaves@{deactivate\_slaves}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{deactivate\_slaves()}
{\footnotesize\ttfamily void deactivate\+\_\+slaves (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function is used to create a package to deactivate motors on all the other devices. \mbox{\label{command__processing_8h_ab7088642f851a8375e8b8edf673b91a4}} 
\index{command\_processing.h@{command\_processing.h}!drive\_slave@{drive\_slave}}
\index{drive\_slave@{drive\_slave}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{drive\_slave()}
{\footnotesize\ttfamily void drive\+\_\+slave (\begin{DoxyParamCaption}\item[{uint8}]{motor\+\_\+idx,  }\item[{uint8}]{slave\+\_\+\+ID }\end{DoxyParamCaption})}

This function is used to create a package and send it to another device, only if the actual board is in master mode. \mbox{\label{command__processing_8h_a85586060c313547d3baf0ae2178665dd}} 
\index{command\_processing.h@{command\_processing.h}!get\_IMU\_param\_list@{get\_IMU\_param\_list}}
\index{get\_IMU\_param\_list@{get\_IMU\_param\_list}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{get\_IMU\_param\_list()}
{\footnotesize\ttfamily void get\+\_\+\+IMU\+\_\+param\+\_\+list (\begin{DoxyParamCaption}\item[{uint16}]{index }\end{DoxyParamCaption})}

This function, depending on the \doxyref{Firmware}{p.}{index} received, gets the list of parameters with their values. \mbox{\label{command__processing_8h_ad25f173505f5ef8848820bad6e1a7038}} 
\index{command\_processing.h@{command\_processing.h}!get\_param\_list@{get\_param\_list}}
\index{get\_param\_list@{get\_param\_list}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{get\_param\_list()}
{\footnotesize\ttfamily void get\+\_\+param\+\_\+list (\begin{DoxyParamCaption}\item[{uint8 $\ast$}]{VAR\+\_\+P[\+NUM\+\_\+\+OF\+\_\+\+PARAMS],  }\item[{uint8}]{TYPES[\+NUM\+\_\+\+OF\+\_\+\+PARAMS],  }\item[{uint8}]{NUM\+\_\+\+ITEMS[\+NUM\+\_\+\+OF\+\_\+\+PARAMS],  }\item[{uint8}]{NUM\+\_\+\+STRUCT[\+NUM\+\_\+\+OF\+\_\+\+PARAMS],  }\item[{uint8 $\ast$}]{NUM\+\_\+\+MENU,  }\item[{const char $\ast$}]{PARAMS\+\_\+\+STR[\+NUM\+\_\+\+OF\+\_\+\+PARAMS],  }\item[{uint8}]{CUSTOM\+\_\+\+PARAM\+\_\+\+SET[\+NUM\+\_\+\+OF\+\_\+\+PARAMS],  }\item[{const char $\ast$}]{MENU\+\_\+\+STR[\+NUM\+\_\+\+OF\+\_\+\+PARAMS\+\_\+\+MENU] }\end{DoxyParamCaption})}

This function, depending on the \doxyref{Firmware}{p.}{index} received, gets the list of parameters with their values. \mbox{\label{command__processing_8h_a8cea8956330cefb9796dcc589defab47}} 
\index{command\_processing.h@{command\_processing.h}!IMU\_reading\_info@{IMU\_reading\_info}}
\index{IMU\_reading\_info@{IMU\_reading\_info}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{IMU\_reading\_info()}
{\footnotesize\ttfamily void IMU\+\_\+reading\+\_\+info (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare an information string about the IMU sensors last reading.


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_a525ccbc7ac3901d938dc352172ee2531}} 
\index{command\_processing.h@{command\_processing.h}!infoGet@{infoGet}}
\index{infoGet@{infoGet}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{infoGet()}
{\footnotesize\ttfamily void info\+Get (\begin{DoxyParamCaption}\item[{uint16}]{info\+\_\+type }\end{DoxyParamCaption})}

This function sends the firmware information prepared with prepare\+\_\+general\+\_\+info or \doxyref{prepare\+\_\+counter\+\_\+info}{p.}{command__processing_8h_a36e3659e6603634b76ed735aa81bb97b} through the serial port to the user interface. Is used when the ID is specified.


\begin{DoxyParams}{Parameters}
{\em info\+\_\+type} & The type of the information needed. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_af5dcf9e6d2a6421fbe636487e7f9f240}} 
\index{command\_processing.h@{command\_processing.h}!infoSend@{infoSend}}
\index{infoSend@{infoSend}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{infoSend()}
{\footnotesize\ttfamily void info\+Send (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function sends the firmware information prepared with info\+Prepare through the serial port to the user interface. Is used when no ID is specified. \mbox{\label{command__processing_8h_a6205a6e88f72f4cc321a7d8abca23e26}} 
\index{command\_processing.h@{command\_processing.h}!LCRChecksum@{LCRChecksum}}
\index{LCRChecksum@{LCRChecksum}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{LCRChecksum()}
{\footnotesize\ttfamily uint8 LCRChecksum (\begin{DoxyParamCaption}\item[{uint8 $\ast$}]{data\+\_\+array,  }\item[{uint8}]{data\+\_\+length }\end{DoxyParamCaption})}

This function calculates a checksum of the array to see if the received data is consistent.


\begin{DoxyParams}{Parameters}
{\em data\+\_\+array} & The array of data that must be checked. \\
\hline
{\em data\+\_\+lenght} & Lenght of the data array that must be checked.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The calculated checksum for the relative data\+\_\+array. 
\end{DoxyReturn}
\mbox{\label{command__processing_8h_a3495e73c73a56de8ec81a4a5defabf1b}} 
\index{command\_processing.h@{command\_processing.h}!manage\_param\_list@{manage\_param\_list}}
\index{manage\_param\_list@{manage\_param\_list}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{manage\_param\_list()}
{\footnotesize\ttfamily void manage\+\_\+param\+\_\+list (\begin{DoxyParamCaption}\item[{uint16}]{index }\end{DoxyParamCaption})}

This function, depending on the \doxyref{Firmware}{p.}{index} received, gets the list of parameters with their values and sends them to user or sets a parameter from all the parameters of the device.


\begin{DoxyParams}{Parameters}
{\em index} & The index of the parameters to be setted. If 0 gets full parameters list. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_afe52941f8bc21271e811fb0d9f265f38}} 
\index{command\_processing.h@{command\_processing.h}!memInit@{memInit}}
\index{memInit@{memInit}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{memInit()}
{\footnotesize\ttfamily uint8 mem\+Init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This functions initializes the memory. It is used also to restore the the parameters to their default values.

\begin{DoxyReturn}{Returns}
A true value if the memory is correctly initialized, false otherwise. 
\end{DoxyReturn}
\mbox{\label{command__processing_8h_adbae7e6ae9b20fa0fda42300e8384f90}} 
\index{command\_processing.h@{command\_processing.h}!memInit\_AirChambersFb@{memInit\_AirChambersFb}}
\index{memInit\_AirChambersFb@{memInit\_AirChambersFb}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{memInit\_AirChambersFb()}
{\footnotesize\ttfamily void mem\+Init\+\_\+\+Air\+Chambers\+Fb (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This functions initializes the memory. It is used also to restore the the parameters to their default values. Specific for Air Chambers firmware \mbox{\label{command__processing_8h_aa85c5dae44c0b81fa1a19c8eea0d5e8c}} 
\index{command\_processing.h@{command\_processing.h}!memInit\_Master@{memInit\_Master}}
\index{memInit\_Master@{memInit\_Master}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{memInit\_Master()}
{\footnotesize\ttfamily void mem\+Init\+\_\+\+Master (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This functions initializes the memory. It is used also to restore the the parameters to their default values. Specific for Master firmware \mbox{\label{command__processing_8h_a14b7eb325aad092fdc529a95955e421b}} 
\index{command\_processing.h@{command\_processing.h}!memInit\_OtbkActWristMs@{memInit\_OtbkActWristMs}}
\index{memInit\_OtbkActWristMs@{memInit\_OtbkActWristMs}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{memInit\_OtbkActWristMs()}
{\footnotesize\ttfamily void mem\+Init\+\_\+\+Otbk\+Act\+Wrist\+Ms (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This functions initializes the memory. It is used also to restore the the parameters to their default values. Specific for Ottobock Active Wrist Master firmware \mbox{\label{command__processing_8h_ad768ebce95dccdd2081e8dcb9adc3597}} 
\index{command\_processing.h@{command\_processing.h}!memInit\_SoftHandPro@{memInit\_SoftHandPro}}
\index{memInit\_SoftHandPro@{memInit\_SoftHandPro}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{memInit\_SoftHandPro()}
{\footnotesize\ttfamily void mem\+Init\+\_\+\+Soft\+Hand\+Pro (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This functions initializes the memory. It is used also to restore the the parameters to their default values. Specific for Soft\+Hand firmware \mbox{\label{command__processing_8h_a3d3b232874d20b4317e9a79cc3c328d9}} 
\index{command\_processing.h@{command\_processing.h}!memRecall@{memRecall}}
\index{memRecall@{memRecall}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{memRecall()}
{\footnotesize\ttfamily void mem\+Recall (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function loads user\textquotesingle{}s settings from the EEPROM. \mbox{\label{command__processing_8h_abdb69a74e3147f28d6cbd2b1d406c8a9}} 
\index{command\_processing.h@{command\_processing.h}!memRestore@{memRestore}}
\index{memRestore@{memRestore}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{memRestore()}
{\footnotesize\ttfamily uint8 mem\+Restore (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function loads default settings from the EEPROM.

\begin{DoxyReturn}{Returns}
A true value if the memory is correctly restored, false otherwise. 
\end{DoxyReturn}
\mbox{\label{command__processing_8h_a81e6b73c0ee52661736a97c08bdb262b}} 
\index{command\_processing.h@{command\_processing.h}!memStore@{memStore}}
\index{memStore@{memStore}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{memStore()}
{\footnotesize\ttfamily uint8 mem\+Store (\begin{DoxyParamCaption}\item[{int}]{displacement }\end{DoxyParamCaption})}

This function stores the setted parameters to the internal EEPROM memory. It is usually called, by the user, after a parameter is set.


\begin{DoxyParams}{Parameters}
{\em displacement} & The address where the parameters will be written.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A true value if the memory is correctly stored, false otherwise. 
\end{DoxyReturn}
\mbox{\label{command__processing_8h_a36e3659e6603634b76ed735aa81bb97b}} 
\index{command\_processing.h@{command\_processing.h}!prepare\_counter\_info@{prepare\_counter\_info}}
\index{prepare\_counter\_info@{prepare\_counter\_info}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{prepare\_counter\_info()}
{\footnotesize\ttfamily void prepare\+\_\+counter\+\_\+info (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare an information string about the cycles counter of the hand.


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_aad29b664ceb06efa22239c86183081d5}} 
\index{command\_processing.h@{command\_processing.h}!prepare\_generic\_info@{prepare\_generic\_info}}
\index{prepare\_generic\_info@{prepare\_generic\_info}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{prepare\_generic\_info()}
{\footnotesize\ttfamily void prepare\+\_\+generic\+\_\+info (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare a generic information string on the device parameters and measurements.


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_a74d6f442041befd738882c98d65ade5d}} 
\index{command\_processing.h@{command\_processing.h}!prepare\_R01\_info@{prepare\_R01\_info}}
\index{prepare\_R01\_info@{prepare\_R01\_info}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{prepare\_R01\_info()}
{\footnotesize\ttfamily void prepare\+\_\+\+R01\+\_\+info (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare an information string about the cycles counter of the hand used in R01 project.


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_a86c2459c9ec8defe82ccdbffc61a5ad6}} 
\index{command\_processing.h@{command\_processing.h}!prepare\_SD\_EMG\_history@{prepare\_SD\_EMG\_history}}
\index{prepare\_SD\_EMG\_history@{prepare\_SD\_EMG\_history}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{prepare\_SD\_EMG\_history()}
{\footnotesize\ttfamily void prepare\+\_\+\+SD\+\_\+\+EMG\+\_\+history (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare an information string to be on a SD card


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_ae9d781117092e15465382f57c05f956b}} 
\index{command\_processing.h@{command\_processing.h}!prepare\_SD\_EMG\_History\_legend@{prepare\_SD\_EMG\_History\_legend}}
\index{prepare\_SD\_EMG\_History\_legend@{prepare\_SD\_EMG\_History\_legend}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{prepare\_SD\_EMG\_History\_legend()}
{\footnotesize\ttfamily void prepare\+\_\+\+SD\+\_\+\+EMG\+\_\+\+History\+\_\+legend (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare an information string to be on a SD card


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_ad46b1279d0552010c63ec48aac9a0068}} 
\index{command\_processing.h@{command\_processing.h}!prepare\_SD\_info@{prepare\_SD\_info}}
\index{prepare\_SD\_info@{prepare\_SD\_info}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{prepare\_SD\_info()}
{\footnotesize\ttfamily void prepare\+\_\+\+SD\+\_\+info (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare an information string to be on a SD card


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_a2bb1121744976bb9d61699edac3fc573}} 
\index{command\_processing.h@{command\_processing.h}!prepare\_SD\_legend@{prepare\_SD\_legend}}
\index{prepare\_SD\_legend@{prepare\_SD\_legend}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{prepare\_SD\_legend()}
{\footnotesize\ttfamily void prepare\+\_\+\+SD\+\_\+legend (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare an information string to be on a SD card


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_ae7f46f75d43b833b5807542e772bc71f}} 
\index{command\_processing.h@{command\_processing.h}!prepare\_SD\_param\_info@{prepare\_SD\_param\_info}}
\index{prepare\_SD\_param\_info@{prepare\_SD\_param\_info}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{prepare\_SD\_param\_info()}
{\footnotesize\ttfamily void prepare\+\_\+\+SD\+\_\+param\+\_\+info (\begin{DoxyParamCaption}\item[{char $\ast$}]{info\+\_\+string }\end{DoxyParamCaption})}

This function is used to prepare an information string to be on a SD card


\begin{DoxyParams}{Parameters}
{\em info\+\_\+string} & An array of chars containing the requested information. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_a1a2eafee01079c42ca1fb14aa7331933}} 
\index{command\_processing.h@{command\_processing.h}!sendAcknowledgment@{sendAcknowledgment}}
\index{sendAcknowledgment@{sendAcknowledgment}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{sendAcknowledgment()}
{\footnotesize\ttfamily void send\+Acknowledgment (\begin{DoxyParamCaption}\item[{uint8}]{value }\end{DoxyParamCaption})}

This functions sends an acknowledgment to see if a command has been executed properly or not.


\begin{DoxyParams}{Parameters}
{\em value} & An ACK\+\_\+\+OK(1) or ACK\+\_\+\+ERROR(0) value. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_a14ae6b482b3c76d271ea73a2b744d608}} 
\index{command\_processing.h@{command\_processing.h}!set\_custom\_param@{set\_custom\_param}}
\index{set\_custom\_param@{set\_custom\_param}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{set\_custom\_param()}
{\footnotesize\ttfamily void set\+\_\+custom\+\_\+param (\begin{DoxyParamCaption}\item[{uint16}]{index }\end{DoxyParamCaption})}

This function, depending on the \doxyref{Firmware}{p.}{index} received, sets the specific parameters with their values and sends them to user or sets a parameter from all the parameters of the device.


\begin{DoxyParams}{Parameters}
{\em index} & The index of the parameters to be setted. \\
\hline
\end{DoxyParams}
\mbox{\label{command__processing_8h_ac8969cb5fdb4916f259075029741e727}} 
\index{command\_processing.h@{command\_processing.h}!setZeros@{setZeros}}
\index{setZeros@{setZeros}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{setZeros()}
{\footnotesize\ttfamily void set\+Zeros (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function sets the encoders zero position. \mbox{\label{command__processing_8h_a4dbcb914c7348f441f7dd56b3400f434}} 
\index{command\_processing.h@{command\_processing.h}!stop\_master\_device@{stop\_master\_device}}
\index{stop\_master\_device@{stop\_master\_device}!command\_processing.h@{command\_processing.h}}
\doxysubsubsection{stop\_master\_device()}
{\footnotesize\ttfamily void stop\+\_\+master\+\_\+device (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This function is used to deactivate master device motors when occurred. 