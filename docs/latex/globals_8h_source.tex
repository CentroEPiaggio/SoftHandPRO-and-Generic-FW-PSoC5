\doxysection{globals.\+h}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{2 \textcolor{comment}{// BSD 3-\/Clause License}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{comment}{// Copyright (c) 2016, qbrobotics}}
\DoxyCodeLine{5 \textcolor{comment}{// Copyright (c) 2017-\/2022, Centro "{}E.Piaggio"{}}}
\DoxyCodeLine{6 \textcolor{comment}{// All rights reserved.}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{comment}{// Redistribution and use in source and binary forms, with or without}}
\DoxyCodeLine{9 \textcolor{comment}{// modification, are permitted provided that the following conditions are met:}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{comment}{// * Redistributions of source code must retain the above copyright notice, this}}
\DoxyCodeLine{12 \textcolor{comment}{//   list of conditions and the following disclaimer.}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{comment}{// * Redistributions in binary form must reproduce the above copyright notice,}}
\DoxyCodeLine{15 \textcolor{comment}{//   this list of conditions and the following disclaimer in the documentation}}
\DoxyCodeLine{16 \textcolor{comment}{//   and/or other materials provided with the distribution.}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{comment}{// * Neither the name of the copyright holder nor the names of its}}
\DoxyCodeLine{19 \textcolor{comment}{//   contributors may be used to endorse or promote products derived from}}
\DoxyCodeLine{20 \textcolor{comment}{//   this software without specific prior written permission.}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{comment}{// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "{}AS IS"{}}}
\DoxyCodeLine{23 \textcolor{comment}{// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE}}
\DoxyCodeLine{24 \textcolor{comment}{// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE}}
\DoxyCodeLine{25 \textcolor{comment}{// DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE}}
\DoxyCodeLine{26 \textcolor{comment}{// FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL}}
\DoxyCodeLine{27 \textcolor{comment}{// DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR}}
\DoxyCodeLine{28 \textcolor{comment}{// SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER}}
\DoxyCodeLine{29 \textcolor{comment}{// CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,}}
\DoxyCodeLine{30 \textcolor{comment}{// OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE}}
\DoxyCodeLine{31 \textcolor{comment}{// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{32 \textcolor{comment}{// POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{33 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{34 }
\DoxyCodeLine{46 \textcolor{preprocessor}{\#ifndef GLOBALS\_H\_INCLUDED}}
\DoxyCodeLine{47 \textcolor{preprocessor}{\#define GLOBALS\_H\_INCLUDED}}
\DoxyCodeLine{48 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{49 }
\DoxyCodeLine{50 \textcolor{comment}{//=================================================================     includes}}
\DoxyCodeLine{51 \textcolor{preprocessor}{\#include "{}FIRMWARE\_CONFIGURATION.h"{}}}
\DoxyCodeLine{52 \textcolor{preprocessor}{\#include "{}device.h"{}}}
\DoxyCodeLine{53 \textcolor{preprocessor}{\#include "{}stdlib.h"{}}}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#include "{}string.h"{}}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#include "{}stdio.h"{}}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#include "{}math.h"{}}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#include "{}commands.h"{}}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#include "{}FS.h"{}}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{61 \textcolor{comment}{//                                                                        DEVICE}}
\DoxyCodeLine{62 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{63 }
\DoxyCodeLine{64 \textcolor{preprocessor}{\#define NUM\_OF\_MOTORS           2       }}
\DoxyCodeLine{65 \textcolor{preprocessor}{\#define NUM\_OF\_SENSORS          3       }}
\DoxyCodeLine{66 \textcolor{preprocessor}{\#define NUM\_OF\_INPUT\_EMGS       2       }}
\DoxyCodeLine{67 \textcolor{preprocessor}{\#define NUM\_OF\_ADDITIONAL\_EMGS  6       }}
\DoxyCodeLine{68 \textcolor{preprocessor}{\#define NUM\_OF\_ADC\_CHANNELS\_MAX (4+NUM\_OF\_INPUT\_EMGS+NUM\_OF\_ADDITIONAL\_EMGS)    }}
\DoxyCodeLine{69 \textcolor{preprocessor}{\#define NUM\_OF\_MS\_PARAMS        2       }}
\DoxyCodeLine{70 \textcolor{preprocessor}{\#define NUM\_OF\_FB\_PARAMS        3       }}
\DoxyCodeLine{71 \textcolor{preprocessor}{\#define NUM\_OF\_WR\_PARAMS        3       }}
\DoxyCodeLine{72 \textcolor{preprocessor}{\#define NUM\_OF\_PARAMS           (75 + NUM\_OF\_MS\_PARAMS + NUM\_OF\_FB\_PARAMS + NUM\_OF\_WR\_PARAMS)      }}
\DoxyCodeLine{73 \textcolor{preprocessor}{\#define NUM\_OF\_PARAMS\_MENU      12      }}
\DoxyCodeLine{74 \textcolor{preprocessor}{\#define N\_IMU\_MAX               5    }}
\DoxyCodeLine{75 \textcolor{preprocessor}{\#define NUM\_OF\_IMU\_DATA         5       }\textcolor{comment}{// accelerometers, gyroscopes, magnetometers, quaternion and temperature data}}
\DoxyCodeLine{76 \textcolor{preprocessor}{\#define N\_ENCODER\_LINE\_MAX      2       }}
\DoxyCodeLine{77 \textcolor{preprocessor}{\#define N\_ENCODERS\_PER\_LINE\_MAX 5       }}
\DoxyCodeLine{78 \textcolor{preprocessor}{\#define N\_ENCODERS              NUM\_OF\_SENSORS}}
\DoxyCodeLine{79 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{80 \textcolor{comment}{//                                                               SYNCHRONIZATION}}
\DoxyCodeLine{81 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83 \textcolor{comment}{//Main frequency 5000 Hz (110 us -\/ max. 200 us cycle time)}}
\DoxyCodeLine{84 \textcolor{preprocessor}{\#define CALIBRATION\_DIV         10      }}
\DoxyCodeLine{85 \textcolor{preprocessor}{\#define DIV\_INIT\_VALUE          1       }}
\DoxyCodeLine{87 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{88 \textcolor{comment}{//                                                                           DMA}}
\DoxyCodeLine{89 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{90     }
\DoxyCodeLine{91 \textcolor{preprocessor}{\#define DMA\_BYTES\_PER\_BURST 2}}
\DoxyCodeLine{92 \textcolor{preprocessor}{\#define DMA\_REQUEST\_PER\_BURST 1}}
\DoxyCodeLine{93 \textcolor{preprocessor}{\#define DMA\_SRC\_BASE (CYDEV\_PERIPH\_BASE)}}
\DoxyCodeLine{94 \textcolor{preprocessor}{\#define DMA\_DST\_BASE (CYDEV\_SRAM\_BASE)  }}
\DoxyCodeLine{95 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{96 \textcolor{comment}{//                                                                     INTERRUPT}}
\DoxyCodeLine{97 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 \textcolor{preprocessor}{\#define    WAIT\_START   0               }}
\DoxyCodeLine{100 \textcolor{preprocessor}{\#define    WAIT\_ID      1               }}
\DoxyCodeLine{101 \textcolor{preprocessor}{\#define    WAIT\_LENGTH  2               }}
\DoxyCodeLine{102 \textcolor{preprocessor}{\#define    RECEIVE      3               }}
\DoxyCodeLine{103 \textcolor{preprocessor}{\#define    UNLOAD       4               }}
\DoxyCodeLine{105 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{106 \textcolor{comment}{//                                                                 CYCLE COUNTER}}
\DoxyCodeLine{107 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{108         }
\DoxyCodeLine{109 \textcolor{preprocessor}{\#define STATE\_INACTIVE  0               }}
\DoxyCodeLine{110 \textcolor{preprocessor}{\#define STATE\_ACTIVE    1               }}
\DoxyCodeLine{111 \textcolor{preprocessor}{\#define COUNTER\_INC     2               }}
\DoxyCodeLine{113 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{114 \textcolor{comment}{//                                                      SPI DELAY (MICROSECONDS)}}
\DoxyCodeLine{115 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{116 \textcolor{preprocessor}{\#define SPI\_DELAY\_LOW       10}}
\DoxyCodeLine{117 \textcolor{preprocessor}{\#define SPI\_DELAY\_HIGH      100}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{120 \textcolor{comment}{//                                                                EXPANSION PORT}}
\DoxyCodeLine{121 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{122 \textcolor{preprocessor}{\#define EXP\_NONE            0x00}}
\DoxyCodeLine{123 \textcolor{preprocessor}{\#define EXP\_SD\_RTC\_ONLY     0x01}}
\DoxyCodeLine{124 \textcolor{preprocessor}{\#define EXP\_BT\_ONLY         0x02}}
\DoxyCodeLine{125 \textcolor{preprocessor}{\#define EXP\_SD\_RTC\_BT       0x03    }}
\DoxyCodeLine{126 }
\DoxyCodeLine{127 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{128 \textcolor{comment}{//                                                             MOTOR DRIVER TYPE}}
\DoxyCodeLine{129 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{130 \textcolor{preprocessor}{\#define DRIVER\_MC33887  0       }\textcolor{comment}{// Standard motor driver}}
\DoxyCodeLine{131 \textcolor{preprocessor}{\#define DRIVER\_VNH5019  1       }\textcolor{comment}{// High power motor driver}}
\DoxyCodeLine{132 \textcolor{preprocessor}{\#define DRIVER\_BRUSHLESS 2      }\textcolor{comment}{// ESC driver for brushless motors}}
\DoxyCodeLine{133  }
\DoxyCodeLine{134 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{135 \textcolor{comment}{//                                                                     HAND SIDE}}
\DoxyCodeLine{136 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{137 \textcolor{preprocessor}{\#define RIGHT\_HAND              0}}
\DoxyCodeLine{138 \textcolor{preprocessor}{\#define LEFT\_HAND               1   }}
\DoxyCodeLine{139     }
\DoxyCodeLine{140 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{141 \textcolor{comment}{//                                                                          USER}}
\DoxyCodeLine{142 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{143 \textcolor{preprocessor}{\#define NUM\_OF\_USERS    3}}
\DoxyCodeLine{144 \textcolor{preprocessor}{\#define GENERIC\_USER    0}}
\DoxyCodeLine{145 \textcolor{preprocessor}{\#define MARIA           1}}
\DoxyCodeLine{146 \textcolor{preprocessor}{\#define R01             2   }}
\DoxyCodeLine{147     }
\DoxyCodeLine{148 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{149 \textcolor{comment}{//                                                                   DEVICE TYPE}}
\DoxyCodeLine{150 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{151 \textcolor{preprocessor}{\#define SOFTHAND\_PRO        0}}
\DoxyCodeLine{152 \textcolor{preprocessor}{\#define GENERIC\_2\_MOTORS    1}}
\DoxyCodeLine{153 \textcolor{preprocessor}{\#define AIR\_CHAMBERS\_FB     2}}
\DoxyCodeLine{154 \textcolor{preprocessor}{\#define OTBK\_ACT\_WRIST\_MS   3  }}
\DoxyCodeLine{155 \textcolor{preprocessor}{\#define SOFTHAND\_2\_MOTORS   4    }}
\DoxyCodeLine{156 \textcolor{preprocessor}{\#define CUFF                5 }}
\DoxyCodeLine{157     }
\DoxyCodeLine{158 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{159 \textcolor{comment}{//                                                               WRIST FSM STATE}}
\DoxyCodeLine{160 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{161 \textcolor{preprocessor}{\#define RELAX\_STATE         0 }}
\DoxyCodeLine{162 \textcolor{preprocessor}{\#define TIMER\_STATE         1}}
\DoxyCodeLine{163 \textcolor{preprocessor}{\#define MOVE\_FAST\_ACT       2}}
\DoxyCodeLine{164 \textcolor{preprocessor}{\#define MOVE\_SLOW\_ACT       3}}
\DoxyCodeLine{165 }
\DoxyCodeLine{166 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{167 \textcolor{comment}{//                                                                   MOTOR GEARS}}
\DoxyCodeLine{168 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{169     }
\DoxyCodeLine{170 \textcolor{comment}{// Number of teeth of the two gears}}
\DoxyCodeLine{171 \textcolor{preprocessor}{\#define SH\_N1 35           }}
\DoxyCodeLine{172 \textcolor{preprocessor}{\#define SH\_N2 3            }}
\DoxyCodeLine{173 \textcolor{preprocessor}{\#define SH\_I1 -\/1           }}
\DoxyCodeLine{174 \textcolor{comment}{//\#define SH\_I2 12         /*!< Second gear invariant value in SoftHandPro device.*/}}
\DoxyCodeLine{175     }
\DoxyCodeLine{176 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{177 \textcolor{comment}{//                                                              STRUCTURES INDEX}}
\DoxyCodeLine{178 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{179 \textcolor{comment}{// First digit: struct, Second digit: index, e.g. ST\_MOTOR\_0 10, ST\_MOTOR\_1 11    }}
\DoxyCodeLine{180 \textcolor{preprocessor}{\#define ST\_DEVICE       0}}
\DoxyCodeLine{181 \textcolor{preprocessor}{\#define ST\_MOTOR        10          }}
\DoxyCodeLine{182 \textcolor{preprocessor}{\#define ST\_ENCODER      20}}
\DoxyCodeLine{183 \textcolor{preprocessor}{\#define ST\_EMG          30}}
\DoxyCodeLine{184 \textcolor{preprocessor}{\#define ST\_IMU          40}}
\DoxyCodeLine{185 \textcolor{preprocessor}{\#define ST\_EXPANSION    50}}
\DoxyCodeLine{186 \textcolor{preprocessor}{\#define ST\_USER         60}}
\DoxyCodeLine{187 \textcolor{preprocessor}{\#define ST\_SH\_SPEC      70}}
\DoxyCodeLine{188 \textcolor{preprocessor}{\#define ST\_MS\_SPEC      80}}
\DoxyCodeLine{189 \textcolor{preprocessor}{\#define ST\_FB\_SPEC      90}}
\DoxyCodeLine{190 \textcolor{preprocessor}{\#define ST\_WR\_SPEC      100}}
\DoxyCodeLine{191 \textcolor{preprocessor}{\#define ST\_JOY\_SPEC     110}}
\DoxyCodeLine{192     }
\DoxyCodeLine{193 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{194 \textcolor{comment}{//                                                                         OTHER}}
\DoxyCodeLine{195 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{196 }
\DoxyCodeLine{197 \textcolor{preprocessor}{\#define FALSE                   0}}
\DoxyCodeLine{198 \textcolor{preprocessor}{\#define TRUE                    1}}
\DoxyCodeLine{199 \textcolor{preprocessor}{\#define DEFAULT\_EEPROM\_DISPLACEMENT 50  }}
\DoxyCodeLine{200 \textcolor{preprocessor}{\#define EEPROM\_BYTES\_ROW        16      }}
\DoxyCodeLine{201 \textcolor{preprocessor}{\#define EEPROM\_COUNTERS\_ROWS    7       }}
\DoxyCodeLine{202 \textcolor{preprocessor}{\#define EEPROM\_AFTER\_CNT\_FREE\_ROWS 2    }}
\DoxyCodeLine{203 \textcolor{preprocessor}{\#define PWM\_MAX\_VALUE\_DC        100     }}
\DoxyCodeLine{204 \textcolor{preprocessor}{\#define PWM\_MAX\_VALUE\_ESC       2985    }}
\DoxyCodeLine{205 \textcolor{preprocessor}{\#define ANTI\_WINDUP             1000    }}
\DoxyCodeLine{206 \textcolor{preprocessor}{\#define DEFAULT\_CURRENT\_LIMIT   1500    }}
\DoxyCodeLine{207 \textcolor{preprocessor}{\#define CURRENT\_HYSTERESIS      10      }}
\DoxyCodeLine{208 \textcolor{preprocessor}{\#define EMG\_SAMPLE\_TO\_DISCARD   500     }}
\DoxyCodeLine{209 \textcolor{preprocessor}{\#define SAMPLES\_FOR\_MEAN        100     }}
\DoxyCodeLine{210 \textcolor{preprocessor}{\#define SAMPLES\_FOR\_EMG\_MEAN    1000    }}
\DoxyCodeLine{211 \textcolor{preprocessor}{\#define SAMPLES\_FOR\_JOYSTICK\_MEAN   200 }}
\DoxyCodeLine{212 \textcolor{preprocessor}{\#define JOYSTICK\_SAMPLE\_TO\_DISCARD  100 }}
\DoxyCodeLine{213 \textcolor{preprocessor}{\#define REST\_POS\_ERR\_THR\_GAIN   10      }}
\DoxyCodeLine{214 \textcolor{preprocessor}{\#define POS\_INTEGRAL\_SAT\_LIMIT  50000000    }}
\DoxyCodeLine{215 \textcolor{preprocessor}{\#define CURR\_INTEGRAL\_SAT\_LIMIT 100000      }}
\DoxyCodeLine{216 \textcolor{preprocessor}{\#define PWM\_RATE\_LIMITER\_MAX    1}}
\DoxyCodeLine{217 \textcolor{preprocessor}{\#define SAFE\_STARTUP\_MOTOR\_READINGS 8000    }}
\DoxyCodeLine{218 \textcolor{preprocessor}{\#define LOOKUP\_DIM              6           }}
\DoxyCodeLine{219 \textcolor{preprocessor}{\#define PREREVISION\_CYCLES      400000      }}
\DoxyCodeLine{220 \textcolor{preprocessor}{\#define SAMPLES\_FOR\_EMG\_HISTORY 600 }}
\DoxyCodeLine{221 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{222 \textcolor{comment}{//                                                        structures definitions}}
\DoxyCodeLine{223 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{224 }
\DoxyCodeLine{225 \textcolor{comment}{//=========================================================     motor references}}
\DoxyCodeLine{229 \textcolor{comment}{}\textcolor{keyword}{struct }st\_ref \{}
\DoxyCodeLine{230     int32 pos;                      }
\DoxyCodeLine{231     int32 curr;                     }
\DoxyCodeLine{232     int32 pwm;                      }
\DoxyCodeLine{233     uint8 onoff;                    }
\DoxyCodeLine{234 \};}
\DoxyCodeLine{235 }
\DoxyCodeLine{236 \textcolor{comment}{//=============================================================     measurements}}
\DoxyCodeLine{240 \textcolor{comment}{}\textcolor{keyword}{struct }st\_meas \{}
\DoxyCodeLine{241     int32 pos[NUM\_OF\_SENSORS];      }
\DoxyCodeLine{242     int32 curr;                     }
\DoxyCodeLine{243     int32 estim\_curr;               }
\DoxyCodeLine{244     int32 hold\_curr;                }
\DoxyCodeLine{245     int8 rot[NUM\_OF\_SENSORS];       }
\DoxyCodeLine{246     int32 vel[NUM\_OF\_SENSORS];      }
\DoxyCodeLine{247     int32 acc[NUM\_OF\_SENSORS];      }
\DoxyCodeLine{248 \};}
\DoxyCodeLine{249 }
\DoxyCodeLine{250 \textcolor{keyword}{struct }st\_adc\_meas \{}
\DoxyCodeLine{251     int32 emg[NUM\_OF\_INPUT\_EMGS];           }
\DoxyCodeLine{252     int32 add\_emg[NUM\_OF\_ADDITIONAL\_EMGS];  }
\DoxyCodeLine{253     int32 joystick[NUM\_OF\_MOTORS];          }
\DoxyCodeLine{254 \};}
\DoxyCodeLine{255 }
\DoxyCodeLine{256 \textcolor{keyword}{struct }st\_fb\_meas \{}
\DoxyCodeLine{257     \textcolor{keywordtype}{float} pressure;                 }
\DoxyCodeLine{258 \};}
\DoxyCodeLine{259 }
\DoxyCodeLine{260 \textcolor{comment}{//==============================================================     data packet}}
\DoxyCodeLine{264 \textcolor{comment}{}\textcolor{keyword}{struct }st\_data\{}
\DoxyCodeLine{265     uint8   buffer[128];            }
\DoxyCodeLine{266     int16   length;                 }
\DoxyCodeLine{267     int16   ind;                    }
\DoxyCodeLine{268     uint8   ready;                  }
\DoxyCodeLine{269 \};}
\DoxyCodeLine{270 }
\DoxyCodeLine{271 \textcolor{comment}{//============================================     settings stored on the memory}}
\DoxyCodeLine{272 }
\DoxyCodeLine{273 \textcolor{comment}{//=================================================     Counters}}
\DoxyCodeLine{277 \textcolor{comment}{}\textcolor{keyword}{struct }st\_counters\{}
\DoxyCodeLine{278     uint32  emg\_act\_counter[2];                           \textcolor{comment}{//8}}
\DoxyCodeLine{279     uint32  position\_hist[10];                                        \textcolor{comment}{//40}}
\DoxyCodeLine{280     uint32  current\_hist[4];                                             \textcolor{comment}{//16}}
\DoxyCodeLine{281     uint32  rest\_counter;                                      \textcolor{comment}{//4}}
\DoxyCodeLine{282     uint32  wire\_disp;                               \textcolor{comment}{//4}}
\DoxyCodeLine{283     uint32  total\_runtime;                                   \textcolor{comment}{//4}}
\DoxyCodeLine{284     uint32  total\_time\_rest;                  \textcolor{comment}{//4    }}
\DoxyCodeLine{285     uint32  power\_cycles;                \textcolor{comment}{//4}}
\DoxyCodeLine{286     uint32  excessive\_signal\_activity[2];   \textcolor{comment}{//8}}
\DoxyCodeLine{287     uint32  motion\_counter[2];                                         \textcolor{comment}{//8}}
\DoxyCodeLine{288     uint8   unused\_bytes[12];                                               \textcolor{comment}{//12}}
\DoxyCodeLine{289 \};                                                                                                          \textcolor{comment}{// TOTAL: 112 bytes}}
\DoxyCodeLine{290 }
\DoxyCodeLine{291 \textcolor{comment}{//=================================================     Device}}
\DoxyCodeLine{295 \textcolor{comment}{}\textcolor{keyword}{struct }st\_device\{}
\DoxyCodeLine{296     uint8   id;                                                                            \textcolor{comment}{//1    }}
\DoxyCodeLine{297     uint8   hw\_maint\_date[3];                                      \textcolor{comment}{//3}}
\DoxyCodeLine{298     uint8   stats\_period\_begin\_date[3];                     \textcolor{comment}{//3}}
\DoxyCodeLine{299     uint8   right\_left;                                                               \textcolor{comment}{//1}}
\DoxyCodeLine{300     uint8   reset\_counters;                                                      \textcolor{comment}{//1}}
\DoxyCodeLine{301     uint8   use\_2nd\_motor\_flag;                                             \textcolor{comment}{//1}}
\DoxyCodeLine{302     uint8   baud\_rate;                                                              \textcolor{comment}{//1}}
\DoxyCodeLine{303     uint8   user\_id;                                              \textcolor{comment}{//1}}
\DoxyCodeLine{304     uint8   dev\_type;                                                      \textcolor{comment}{//1}}
\DoxyCodeLine{305     uint8   unused\_bytes[3];                                                \textcolor{comment}{//3}}
\DoxyCodeLine{306 \};                                                                                                          \textcolor{comment}{// TOTAL: 16 BYTES}}
\DoxyCodeLine{307 }
\DoxyCodeLine{308 \textcolor{comment}{//=================================================     Motor}}
\DoxyCodeLine{312 \textcolor{comment}{}\textcolor{keyword}{struct }st\_motor\{}
\DoxyCodeLine{313     int32   k\_p;                                           \textcolor{comment}{//4}}
\DoxyCodeLine{314     int32   k\_i;                                            \textcolor{comment}{//4}}
\DoxyCodeLine{315     int32   k\_d;                                             \textcolor{comment}{//4}}
\DoxyCodeLine{316     int32   k\_p\_c;                                          \textcolor{comment}{//4}}
\DoxyCodeLine{317     int32   k\_i\_c;                                           \textcolor{comment}{//4}}
\DoxyCodeLine{318     int32   k\_d\_c;                                            \textcolor{comment}{//4 }}
\DoxyCodeLine{319     int32   k\_p\_dl;                                   \textcolor{comment}{//4}}
\DoxyCodeLine{320     int32   k\_i\_dl;                                 \textcolor{comment}{//4     }}
\DoxyCodeLine{321     int32   k\_d\_dl;                                  \textcolor{comment}{//4}}
\DoxyCodeLine{322     int32   k\_p\_c\_dl;                                  \textcolor{comment}{//4}}
\DoxyCodeLine{323     int32   k\_i\_c\_dl;                                \textcolor{comment}{//4}}
\DoxyCodeLine{324     int32   k\_d\_c\_dl;                                 \textcolor{comment}{//4     }}
\DoxyCodeLine{325     uint8   activ;                                                                \textcolor{comment}{//1}}
\DoxyCodeLine{326     uint8   activate\_pwm\_rescaling;                        \textcolor{comment}{//1}}
\DoxyCodeLine{327     uint8   motor\_driver\_type;                                                    \textcolor{comment}{//1}}
\DoxyCodeLine{328     uint8   pos\_lim\_flag;                                             \textcolor{comment}{//1}}
\DoxyCodeLine{329     int32   pos\_lim\_inf;                                           \textcolor{comment}{//4     }}
\DoxyCodeLine{330     int32   pos\_lim\_sup;                                           \textcolor{comment}{//4}}
\DoxyCodeLine{331     int32   max\_step\_neg;                   \textcolor{comment}{//4}}
\DoxyCodeLine{332     int32   max\_step\_pos;                   \textcolor{comment}{//4          }}
\DoxyCodeLine{333     \textcolor{keywordtype}{float}   curr\_lookup[LOOKUP\_DIM];                           \textcolor{comment}{//24}}
\DoxyCodeLine{334     int16   current\_limit;                                                \textcolor{comment}{//2}}
\DoxyCodeLine{335     uint8   input\_mode;                                                             \textcolor{comment}{//1 }}
\DoxyCodeLine{336     uint8   control\_mode;                                                         \textcolor{comment}{//1}}
\DoxyCodeLine{337     uint8   encoder\_line;                               \textcolor{comment}{//1}}
\DoxyCodeLine{338     uint8   pwm\_rate\_limiter;                           \textcolor{comment}{//1}}
\DoxyCodeLine{339     uint8   not\_revers\_motor\_flag;                    \textcolor{comment}{//1 }}
\DoxyCodeLine{340     uint8   unused\_bytes[13];                                               \textcolor{comment}{//13}}
\DoxyCodeLine{341 \};                                                                                                          \textcolor{comment}{// TOTAL: 112 BYTES}}
\DoxyCodeLine{342 }
\DoxyCodeLine{343 \textcolor{comment}{//=================================================     Encoder}}
\DoxyCodeLine{347 \textcolor{comment}{}\textcolor{keyword}{struct }st\_encoder\{}
\DoxyCodeLine{348     uint8   Enc\_raw\_read\_conf[N\_ENCODERS\_PER\_LINE\_MAX];  \textcolor{comment}{//5}}
\DoxyCodeLine{349     uint8   res[NUM\_OF\_SENSORS];                                                    \textcolor{comment}{//3}}
\DoxyCodeLine{350     int32   m\_off[NUM\_OF\_SENSORS];                                                \textcolor{comment}{//12 }}
\DoxyCodeLine{351     float32 m\_mult[NUM\_OF\_SENSORS];                                           \textcolor{comment}{//12}}
\DoxyCodeLine{352     uint8   double\_encoder\_on\_off;                                             \textcolor{comment}{//1}}
\DoxyCodeLine{353     uint8   Enc\_idx\_use\_for\_control[NUM\_OF\_SENSORS];       \textcolor{comment}{//3}}
\DoxyCodeLine{354     int8    motor\_handle\_ratio;                                \textcolor{comment}{//1}}
\DoxyCodeLine{355     int8    gears\_params[3];              \textcolor{comment}{//3}}
\DoxyCodeLine{356     uint8   unused\_bytes[8];                                                \textcolor{comment}{//8}}
\DoxyCodeLine{357 \};                                                                                                          \textcolor{comment}{// TOTAL: 48 BYTES}}
\DoxyCodeLine{358 }
\DoxyCodeLine{359 \textcolor{comment}{//=================================================     EMG}}
\DoxyCodeLine{363 \textcolor{comment}{}\textcolor{keyword}{struct }st\_emg\{}
\DoxyCodeLine{364     uint16  emg\_threshold[NUM\_OF\_INPUT\_EMGS];            \textcolor{comment}{//4}}
\DoxyCodeLine{365     uint32  emg\_max\_value[NUM\_OF\_INPUT\_EMGS];                                  \textcolor{comment}{//8     }}
\DoxyCodeLine{366     uint8   emg\_speed[NUM\_OF\_INPUT\_EMGS];                       \textcolor{comment}{//2    }}
\DoxyCodeLine{367     uint8   emg\_calibration\_flag;                                  \textcolor{comment}{//1  }}
\DoxyCodeLine{368     uint8   switch\_emg;                                                   \textcolor{comment}{//1}}
\DoxyCodeLine{369 \};                                                                                                          \textcolor{comment}{// TOTAL: 16 BYTES                                                                                                         // TOTAL: 32 BYTES}}
\DoxyCodeLine{370 }
\DoxyCodeLine{371 \textcolor{comment}{//=================================================     IMU}}
\DoxyCodeLine{375 \textcolor{comment}{}\textcolor{keyword}{struct }st\_imu\{}
\DoxyCodeLine{376     uint8   read\_imu\_flag;                                                \textcolor{comment}{//1}}
\DoxyCodeLine{377     uint8   SPI\_read\_delay;                                                     \textcolor{comment}{//1}}
\DoxyCodeLine{378     uint8   IMU\_conf[N\_IMU\_MAX][NUM\_OF\_IMU\_DATA];                           \textcolor{comment}{//25}}
\DoxyCodeLine{379     uint8   unused\_bytes[5];                                                \textcolor{comment}{//5}}
\DoxyCodeLine{380 \};                                                                                                          \textcolor{comment}{// TOTAL: 32 BYTES}}
\DoxyCodeLine{381 }
\DoxyCodeLine{382 \textcolor{comment}{//=================================================     Expansion}}
\DoxyCodeLine{386 \textcolor{comment}{}\textcolor{keyword}{struct }st\_expansion\{}
\DoxyCodeLine{387     uint8   curr\_time[6];                                  \textcolor{comment}{//6 }}
\DoxyCodeLine{388     uint8   read\_exp\_port\_flag;                                                \textcolor{comment}{//1}}
\DoxyCodeLine{389     uint8   read\_ADC\_sensors\_port\_flag;                                      \textcolor{comment}{//1}}
\DoxyCodeLine{390     uint8   ADC\_conf[NUM\_OF\_ADC\_CHANNELS\_MAX];                               \textcolor{comment}{//12}}
\DoxyCodeLine{391     uint8   record\_EMG\_history\_on\_SD;                                \textcolor{comment}{//1}}
\DoxyCodeLine{392     uint8   unused\_bytes[11];                                               \textcolor{comment}{//11}}
\DoxyCodeLine{393 \};                                                                                                          \textcolor{comment}{// TOTAL: 32 BYTES}}
\DoxyCodeLine{394 }
\DoxyCodeLine{395 \textcolor{comment}{//=================================================     User}}
\DoxyCodeLine{399 \textcolor{comment}{}\textcolor{keyword}{struct }st\_user\{}
\DoxyCodeLine{400     \textcolor{keywordtype}{char}    user\_code\_string[8];                                                    \textcolor{comment}{//8}}
\DoxyCodeLine{401     \textcolor{keyword}{struct  }st\_emg user\_emg;                               \textcolor{comment}{//16}}
\DoxyCodeLine{402     uint8   unused\_bytes[8];                                                \textcolor{comment}{//8}}
\DoxyCodeLine{403 \};                                                                                                          \textcolor{comment}{// TOTAL: 32 BYTES}}
\DoxyCodeLine{404 }
\DoxyCodeLine{405 \textcolor{comment}{//=================================================     SoftHand specific}}
\DoxyCodeLine{409 \textcolor{comment}{}\textcolor{keyword}{struct }st\_SH\_spec\{}
\DoxyCodeLine{410     int32   rest\_pos;                                           \textcolor{comment}{//4}}
\DoxyCodeLine{411     int32   rest\_delay;                                   \textcolor{comment}{//4}}
\DoxyCodeLine{412     int32   rest\_vel;                               \textcolor{comment}{//4}}
\DoxyCodeLine{413     uint8   rest\_position\_flag;                                         \textcolor{comment}{//1}}
\DoxyCodeLine{414     uint8   unused\_bytes[3];                                                \textcolor{comment}{//3}}
\DoxyCodeLine{415 \};                                                                                                          \textcolor{comment}{// TOTAL: 16 BYTES                                                                                                         // TOTAL: 80 BYTES}}
\DoxyCodeLine{416 }
\DoxyCodeLine{417 \textcolor{comment}{//=================================================     Joystick specific}}
\DoxyCodeLine{421 \textcolor{comment}{}\textcolor{keyword}{struct }st\_JOY\_spec\{}
\DoxyCodeLine{422     uint16  joystick\_closure\_speed;                                           \textcolor{comment}{//2 }}
\DoxyCodeLine{423     int16   joystick\_threshold;                                                   \textcolor{comment}{//2}}
\DoxyCodeLine{424     uint16  joystick\_gains[2];                                           \textcolor{comment}{//4}}
\DoxyCodeLine{425     uint8   unused\_bytes[8];                                                \textcolor{comment}{//8}}
\DoxyCodeLine{426 \};  }
\DoxyCodeLine{427 }
\DoxyCodeLine{428 \textcolor{comment}{//=================================================     Master specific}}
\DoxyCodeLine{432 \textcolor{comment}{}\textcolor{keyword}{struct }st\_MASTER\_spec\{}
\DoxyCodeLine{433     uint8   slave\_comm\_active;                                       \textcolor{comment}{//1}}
\DoxyCodeLine{434     uint8   slave\_ID;                                                                       \textcolor{comment}{//1}}
\DoxyCodeLine{435     uint8   unused\_bytes[14];                                               \textcolor{comment}{//14}}
\DoxyCodeLine{436 \};                                                                                                          \textcolor{comment}{// TOTAL: 16 BYTES }}
\DoxyCodeLine{437 }
\DoxyCodeLine{438 \textcolor{comment}{//=================================================     Feedback specific}}
\DoxyCodeLine{442 \textcolor{comment}{}\textcolor{keyword}{struct }st\_FB\_spec\{}
\DoxyCodeLine{443     int32   max\_residual\_current;                                     \textcolor{comment}{//4}}
\DoxyCodeLine{444     \textcolor{keywordtype}{float}   maximum\_pressure\_kPa;                             \textcolor{comment}{//4}}
\DoxyCodeLine{445     \textcolor{keywordtype}{float}   prop\_err\_fb\_gain;                               \textcolor{comment}{//4}}
\DoxyCodeLine{446     uint8   unused\_bytes[4];                                                \textcolor{comment}{//4}}
\DoxyCodeLine{447 \};                                                                                                          \textcolor{comment}{// TOTAL: 16 BYTES }}
\DoxyCodeLine{448  }
\DoxyCodeLine{449 \textcolor{comment}{//=================================================     Wrist specific}}
\DoxyCodeLine{453 \textcolor{comment}{}\textcolor{keyword}{struct }st\_WR\_spec\{}
\DoxyCodeLine{454     uint8   activation\_mode;               \textcolor{comment}{//1}}
\DoxyCodeLine{455     uint16  fast\_act\_threshold[NUM\_OF\_INPUT\_EMGS];  \textcolor{comment}{//4}}
\DoxyCodeLine{456     uint8   wrist\_direction\_association;                        \textcolor{comment}{//1}}
\DoxyCodeLine{457     uint8   unused\_bytes[10];                                               \textcolor{comment}{//10}}
\DoxyCodeLine{458 \};                                                                                                          \textcolor{comment}{// TOTAL: 16 BYTES }}
\DoxyCodeLine{459                                                                                                        \textcolor{comment}{// TOTAL: 16 BYTES }}
\DoxyCodeLine{460 }
\DoxyCodeLine{461 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/ MEMORY VARIABLES -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/// }}
\DoxyCodeLine{465 \textcolor{comment}{}\textcolor{comment}{// Since PSOC5 ARM memory is 4-\/bytes aligned, st\_mem structure variables are not contiguous}}
\DoxyCodeLine{466 \textcolor{keyword}{struct }st\_eeprom \{}
\DoxyCodeLine{467     }
\DoxyCodeLine{468     uint8  flag;                                           \textcolor{comment}{//1 byte}}
\DoxyCodeLine{469     uint8  unused\_bytes[15];                          \textcolor{comment}{//1 row     (End of row 1)}}
\DoxyCodeLine{470     \textcolor{keyword}{struct }st\_counters cnt;                                                      \textcolor{comment}{//6 rows    (End of row 7)}}
\DoxyCodeLine{471     uint8  unused\_bytes1[EEPROM\_BYTES\_ROW*EEPROM\_AFTER\_CNT\_FREE\_ROWS];    \textcolor{comment}{//3 rows    (End of row 10)}}
\DoxyCodeLine{472     \textcolor{keyword}{struct }st\_device dev;                                                         \textcolor{comment}{//1 row     (End of row 11)}}
\DoxyCodeLine{473     \textcolor{keyword}{struct }st\_motor motor[NUM\_OF\_MOTORS];                                            \textcolor{comment}{//7*2 rows  (End of row 25)}}
\DoxyCodeLine{474     \textcolor{keyword}{struct }st\_encoder enc[N\_ENCODER\_LINE\_MAX];                            \textcolor{comment}{//3*2 rows  (End of row 31)}}
\DoxyCodeLine{475     \textcolor{keyword}{struct }st\_emg emg;                                                                 \textcolor{comment}{//1 row     (End of row 32)}}
\DoxyCodeLine{476     \textcolor{keyword}{struct }st\_imu imu;                                                         \textcolor{comment}{//2 rows    (End of row 34)}}
\DoxyCodeLine{477     \textcolor{keyword}{struct }st\_expansion exp;                                                    \textcolor{comment}{//2 rows    (End of row 36)  }}
\DoxyCodeLine{478     \textcolor{keyword}{struct }st\_user user[NUM\_OF\_USERS];                                                \textcolor{comment}{//2*3 rows  (End of row 42)}}
\DoxyCodeLine{479     }
\DoxyCodeLine{480     \textcolor{keyword}{struct }st\_SH\_spec SH;                                                \textcolor{comment}{//1 row     (End of row 43)}}
\DoxyCodeLine{481     \textcolor{keyword}{struct }st\_JOY\_spec JOY\_spec;                                         \textcolor{comment}{//1 row     (End of row 44)}}
\DoxyCodeLine{482     \textcolor{keyword}{struct }st\_MASTER\_spec MS;                                              \textcolor{comment}{//1 row     (End of row 45)}}
\DoxyCodeLine{483     \textcolor{keyword}{struct }st\_FB\_spec FB;                                                \textcolor{comment}{//1 row     (End of row 46)}}
\DoxyCodeLine{484     \textcolor{keyword}{struct }st\_WR\_spec WR;                                                   \textcolor{comment}{//1 row     (End of row 47)}}
\DoxyCodeLine{485 }
\DoxyCodeLine{486 \textcolor{preprocessor}{    \#ifdef GENERIC\_FW}}
\DoxyCodeLine{487     \textcolor{comment}{//struct st\_CUFF\_spec CUFF\_spec;}}
\DoxyCodeLine{488 \textcolor{preprocessor}{\#endif    }}
\DoxyCodeLine{489 \};}
\DoxyCodeLine{490 }
\DoxyCodeLine{491 \textcolor{comment}{//=================================================     IMU variables}}
\DoxyCodeLine{495 \textcolor{comment}{}\textcolor{keyword}{struct }st\_imu\_data \{}
\DoxyCodeLine{496     uint8 flags;        \textcolor{comment}{// Flags to know what we are reading (0/1) from each imu [ accel | gyro | magn | quat | temp ]}}
\DoxyCodeLine{497     int16 accel\_value[3];}
\DoxyCodeLine{498     int16 gyro\_value[3];}
\DoxyCodeLine{499     int16 mag\_value[3];}
\DoxyCodeLine{500     \textcolor{keywordtype}{float} quat\_value[4];}
\DoxyCodeLine{501     int16 temp\_value;}
\DoxyCodeLine{502 \};}
\DoxyCodeLine{503 }
\DoxyCodeLine{504 \textcolor{comment}{//=================================================     filter variables}}
\DoxyCodeLine{508 \textcolor{comment}{}\textcolor{keyword}{struct }st\_filter\{}
\DoxyCodeLine{509     int32 old\_value;                }
\DoxyCodeLine{510     int32 gain;                     }
\DoxyCodeLine{511 \};}
\DoxyCodeLine{512 }
\DoxyCodeLine{513 \textcolor{comment}{//==============================================     hand calibration parameters}}
\DoxyCodeLine{517 \textcolor{comment}{}\textcolor{keyword}{struct }st\_calib \{}
\DoxyCodeLine{518     uint8   enabled;                }
\DoxyCodeLine{519     uint8   direction;              }
\DoxyCodeLine{520     int16   speed;                  }
\DoxyCodeLine{521     int16   repetitions;            }
\DoxyCodeLine{522 \};}
\DoxyCodeLine{523 }
\DoxyCodeLine{524 \textcolor{comment}{//=================================================     emg status}}
\DoxyCodeLine{525 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{}
\DoxyCodeLine{526 }
\DoxyCodeLine{527     NORMAL        = 0,              }
\DoxyCodeLine{528     RESET         = 1,              }
\DoxyCodeLine{529     DISCARD       = 2,              }
\DoxyCodeLine{530     SUM\_AND\_MEAN  = 3,              }
\DoxyCodeLine{531     WAIT          = 4,              }
\DoxyCodeLine{532     WAIT\_EoC      = 5               }
\DoxyCodeLine{533 \} adc\_status;                       }
\DoxyCodeLine{535 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{}
\DoxyCodeLine{536     }
\DoxyCodeLine{537     PREPARE\_DATA    = 0,            }
\DoxyCodeLine{538     WRITE\_CYCLES    = 1,            }
\DoxyCodeLine{539     WAIT\_QUERY      = 2,            }
\DoxyCodeLine{540     WRITE\_END       = 3,            }
\DoxyCodeLine{541     NONE            = 4             }
\DoxyCodeLine{542 \} counter\_status;                   }
\DoxyCodeLine{544 \textcolor{comment}{//====================================      external global variables definition}}
\DoxyCodeLine{545 }
\DoxyCodeLine{546 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_ref    g\_ref[NUM\_OF\_MOTORS], g\_refNew[NUM\_OF\_MOTORS], g\_refOld[NUM\_OF\_MOTORS]; }
\DoxyCodeLine{547 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_meas   g\_meas[N\_ENCODER\_LINE\_MAX], g\_measOld[N\_ENCODER\_LINE\_MAX];              }
\DoxyCodeLine{548 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_adc\_meas g\_adc\_meas, g\_adc\_measOld;}
\DoxyCodeLine{549 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_fb\_meas g\_fb\_meas;                 }
\DoxyCodeLine{550 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_data   g\_rx;                       }
\DoxyCodeLine{551 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_eeprom g\_mem, c\_mem;               }
\DoxyCodeLine{552 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_calib  calib;                      }
\DoxyCodeLine{553 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_filter filt\_v[NUM\_OF\_MOTORS], filt\_curr\_diff[NUM\_OF\_MOTORS], filt\_i[NUM\_OF\_MOTORS];     }
\DoxyCodeLine{554 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_filter filt\_vel[NUM\_OF\_SENSORS];                }
\DoxyCodeLine{555 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_filter filt\_emg[NUM\_OF\_INPUT\_EMGS+NUM\_OF\_ADDITIONAL\_EMGS]; }
\DoxyCodeLine{556 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_filter filt\_detect\_pc;             }
\DoxyCodeLine{558 \textcolor{keyword}{extern} uint16 timer\_value;                          }
\DoxyCodeLine{559 \textcolor{keyword}{extern} uint16 timer\_value0;                         }
\DoxyCodeLine{560 \textcolor{keyword}{extern} \textcolor{keywordtype}{float} cycle\_time;                          }
\DoxyCodeLine{562 \textcolor{keyword}{extern} int32    dev\_tension[NUM\_OF\_MOTORS];         }
\DoxyCodeLine{563 \textcolor{keyword}{extern} uint16   dev\_pwm\_limit[NUM\_OF\_MOTORS];       }
\DoxyCodeLine{564 \textcolor{keyword}{extern} uint16   dev\_pwm\_sat[NUM\_OF\_MOTORS];         }
\DoxyCodeLine{565 \textcolor{keyword}{extern} int32    dev\_tension\_f[NUM\_OF\_MOTORS];       }
\DoxyCodeLine{566 \textcolor{keyword}{extern} int32    pow\_tension[NUM\_OF\_MOTORS];         }
\DoxyCodeLine{567 \textcolor{keyword}{extern} int32    detect\_power\_cycle;                 }
\DoxyCodeLine{569 \textcolor{keyword}{extern} counter\_status CYDATA cycles\_status;         }
\DoxyCodeLine{570 \textcolor{keyword}{extern} adc\_status CYDATA emg\_1\_status;              }
\DoxyCodeLine{571 \textcolor{keyword}{extern} adc\_status CYDATA emg\_2\_status;              }
\DoxyCodeLine{572 \textcolor{keyword}{extern} adc\_status CYDATA joy\_UD\_status;             }
\DoxyCodeLine{573 \textcolor{keyword}{extern} adc\_status CYDATA joy\_LR\_status;             }
\DoxyCodeLine{575 \textcolor{comment}{// Bit Flag}}
\DoxyCodeLine{576 \textcolor{keyword}{extern} CYBIT reset\_last\_value\_flag[N\_ENCODER\_LINE\_MAX]; }
\DoxyCodeLine{577 \textcolor{keyword}{extern} CYBIT tension\_valid;                         }
\DoxyCodeLine{578 \textcolor{keyword}{extern} CYBIT interrupt\_flag;                        }
\DoxyCodeLine{579 \textcolor{keyword}{extern} CYBIT cycles\_interrupt\_flag;                 }
\DoxyCodeLine{580 \textcolor{keyword}{extern} uint8 maintenance\_flag;                      }
\DoxyCodeLine{581 \textcolor{keyword}{extern} CYBIT can\_write;                             }
\DoxyCodeLine{582 \textcolor{keyword}{extern} uint8 rest\_enabled;                          }
\DoxyCodeLine{583 \textcolor{keyword}{extern} uint8 forced\_open;                           }
\DoxyCodeLine{584 \textcolor{keyword}{extern} uint8 battery\_low\_SoC;                       }
\DoxyCodeLine{585 \textcolor{keyword}{extern} uint8 change\_ext\_ref\_flag;                   }
\DoxyCodeLine{586 \textcolor{keyword}{extern} CYBIT reset\_PSoC\_flag;                       }
\DoxyCodeLine{588 \textcolor{comment}{// ADC Buffer}}
\DoxyCodeLine{589 \textcolor{keyword}{extern} int16 ADC\_buf[NUM\_OF\_ADC\_CHANNELS\_MAX];      }
\DoxyCodeLine{590 \textcolor{keyword}{extern} uint8 NUM\_OF\_ANALOG\_INPUTS;                  }
\DoxyCodeLine{592 \textcolor{comment}{// PWM value}}
\DoxyCodeLine{593 \textcolor{keyword}{extern} int8 pwm\_sign[NUM\_OF\_MOTORS];                }
\DoxyCodeLine{595 \textcolor{comment}{// Encoder variables}}
\DoxyCodeLine{596 \textcolor{keyword}{extern} uint32 data\_encoder\_raw[N\_ENCODER\_LINE\_MAX][N\_ENCODERS\_PER\_LINE\_MAX];}
\DoxyCodeLine{597 \textcolor{keyword}{extern} uint8 N\_Encoder\_Line\_Connected[N\_ENCODER\_LINE\_MAX]; \textcolor{comment}{// Used to map how many encoders are connected to each CS pin, there are N\_ENCODER\_LINE\_MAX CS on the board and each of them can contain N\_ENCODERS\_PER\_LINE\_MAX encoders}}
\DoxyCodeLine{598 \textcolor{keyword}{extern} uint16 Encoder\_Value[N\_ENCODER\_LINE\_MAX][N\_ENCODERS\_PER\_LINE\_MAX];}
\DoxyCodeLine{599 \textcolor{keyword}{extern} uint8 Encoder\_Check[N\_ENCODER\_LINE\_MAX][N\_ENCODERS\_PER\_LINE\_MAX];}
\DoxyCodeLine{600 \textcolor{keyword}{extern} CYBIT pos\_reconstruct[N\_ENCODER\_LINE\_MAX];}
\DoxyCodeLine{601 }
\DoxyCodeLine{602 \textcolor{comment}{// Rest Position variables}}
\DoxyCodeLine{603 \textcolor{keyword}{extern} int32 rest\_pos\_curr\_ref;                     }
\DoxyCodeLine{605 \textcolor{comment}{// SD variables}}
\DoxyCodeLine{606 \textcolor{keyword}{extern} uint8 sdEnabled;}
\DoxyCodeLine{607 \textcolor{keyword}{extern} FS\_FILE * pFile;}
\DoxyCodeLine{608 \textcolor{keyword}{extern} \textcolor{keywordtype}{char} sdFile[100];}
\DoxyCodeLine{609 \textcolor{keyword}{extern} \textcolor{keywordtype}{char} sdParam[100];}
\DoxyCodeLine{610 \textcolor{keyword}{extern} FS\_FILE * pEMGHFile;}
\DoxyCodeLine{611 \textcolor{keyword}{extern} \textcolor{keywordtype}{char} sdEMGHFile[100];}
\DoxyCodeLine{612 \textcolor{keyword}{extern} \textcolor{keywordtype}{char} sdR01File[100];}
\DoxyCodeLine{613 }
\DoxyCodeLine{614 \textcolor{comment}{// BLUETOOTH variables}}
\DoxyCodeLine{615 \textcolor{keyword}{extern} uint8 btEnabled;}
\DoxyCodeLine{616 \textcolor{keyword}{extern} uint8 bt\_src;}
\DoxyCodeLine{617 }
\DoxyCodeLine{618 \textcolor{comment}{// IMU variables}}
\DoxyCodeLine{619 \textcolor{keyword}{extern} uint8 N\_IMU\_Connected;}
\DoxyCodeLine{620 \textcolor{keyword}{extern} uint8 IMU\_connected[N\_IMU\_MAX];}
\DoxyCodeLine{621 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} imus\_data\_size;}
\DoxyCodeLine{622 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} single\_imu\_size[N\_IMU\_MAX];}
\DoxyCodeLine{623 \textcolor{keyword}{extern} \textcolor{keyword}{struct }st\_imu\_data g\_imu[N\_IMU\_MAX], g\_imuNew[N\_IMU\_MAX];}
\DoxyCodeLine{624 \textcolor{keyword}{extern} uint8 Accel[N\_IMU\_MAX][6];}
\DoxyCodeLine{625 \textcolor{keyword}{extern} uint8 Gyro[N\_IMU\_MAX][6];}
\DoxyCodeLine{626 \textcolor{keyword}{extern} uint8 Mag[N\_IMU\_MAX][6];}
\DoxyCodeLine{627 \textcolor{keyword}{extern} uint8 MagCal[N\_IMU\_MAX][3];}
\DoxyCodeLine{628 \textcolor{keyword}{extern} uint8 Temp[N\_IMU\_MAX][2];}
\DoxyCodeLine{629 \textcolor{keyword}{extern} \textcolor{keywordtype}{float} Quat[N\_IMU\_MAX][4];}
\DoxyCodeLine{630 }
\DoxyCodeLine{631 \textcolor{comment}{// MASTER variables}}
\DoxyCodeLine{632 \textcolor{keyword}{extern} uint8 master\_mode;               }
\DoxyCodeLine{634 \textcolor{comment}{// EMG HISTORY    }}
\DoxyCodeLine{635 \textcolor{keyword}{extern} uint16 emg\_history[SAMPLES\_FOR\_EMG\_HISTORY][NUM\_OF\_INPUT\_EMGS];   }
\DoxyCodeLine{636 \textcolor{keyword}{extern} uint32 emg\_history\_next\_idx;    }
\DoxyCodeLine{638 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{639 }
\DoxyCodeLine{640 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{641 }
\DoxyCodeLine{642 \textcolor{comment}{//[] END OF FILE}}

\end{DoxyCode}
